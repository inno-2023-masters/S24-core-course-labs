# Lab 14

## K8S Prometheus Stack

- Prometheus Operator
  - configuration of prometheus
- Prometheus
  - time-series db
- Alertmanager
  - Setuping alerts
- Prometheus node-exporter
  - Collecting hardware and os level metrics
- Prometheus blackbox-exporter
  - Collecting uptime and endpoints metrics
- Prometheus Adapter for Kubernetes
  - Collecting metrics from Kubernetes cluster
- kube-state-metrics
  - Generating metrics of entities
- Grafana
  - visualization
  
## Results

```
NAME                                                          READY   STATUS    RESTARTS      AGE
pod/alertmanager-app-python-kube-prometheus-alertmanager-0    2/2     Running   0             4m16s
pod/app-python-grafana-77b9dfdfb7-bn5gh                       3/3     Running   0             4m28s
pod/app-python-kube-prometheus-operator-6f9659dd88-68r7b      1/1     Running   0             4m28s
pod/app-python-kube-state-metrics-66587cdfc8-47x62            1/1     Running   0             4m28s
pod/app-python-prometheus-node-exporter-kwjxk                 1/1     Running   0             4m28s
pod/vault-0                                                   1/1     Running   3 (35m ago)   21d4h
pod/app-python-sts-0                                          1/1     Running   0             7d15h
pod/app-python-sts-1                                          1/1     Running   0             7d15h
pod/app-python-sts-2                                          1/1     Running   0             7d15h
pod/prometheus-app-python-kube-prometheus-prometheus-0        2/2     Running   0             4m16s

NAME                                                                    READY   AGE
statefulset.apps/alertmanager-app-python-kube-prometheus-alertmanager   1/1     4m16s
statefulset.apps/app-python-sts                                         3/3     7d15h
statefulset.apps/prometheus-app-python-kube-prometheus-prometheus       1/1     4m16s

NAME                                              TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE
service/alertmanager-operated                     ClusterIP   None             <none>        9093/TCP,9094/TCP,9094/UDP   4m16s
service/app-python-grafana                        ClusterIP   10.98.5.207      <none>        80/TCP                       4m28s
service/app-python-kube-prometheus-alertmanager   ClusterIP   10.105.154.167   <none>        9093/TCP,8080/TCP            4m28s
service/app-python-kube-prometheus-operator       ClusterIP   10.104.156.221   <none>        443/TCP                      4m28s
service/app-python-kube-prometheus-prometheus     ClusterIP   10.107.218.84    <none>        9090/TCP,8080/TCP            4m28s
service/app-python-kube-state-metrics             ClusterIP   10.103.157.79    <none>        8080/TCP                     4m28s
service/app-python-prometheus-node-exporter       ClusterIP   10.111.126.1     <none>        9100/TCP                     4m28s
service/app-python-sts                            NodePort    10.102.31.180    <none>        5001:31348/TCP               7d15h
service/kubernetes                                ClusterIP   10.96.0.1        <none>        443/TCP                      28d
service/prometheus-operated                       ClusterIP   None             <none>        9090/TCP                     4m16s

NAME                                  STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/app-python-deploy-f857b665d-7fqv6   Bound    pvc-ed528790-2e77-4777-acba-8fb1d83262a4   1Gi        RWO            standard       7d15h
persistentvolumeclaim/app-python-deploy-f857b665d-w6sfw   Bound    pvc-62b952b9-44bc-4a18-9014-f94f1d729e4a   1Gi        RWO            standard       7d15h
persistentvolumeclaim/app-python-deploy-f857b665d-xt7r9   Bound    pvc-11cecbb9-d4w5-4386-b5f2-cfaa4496285b   1Gi        RWO            standard       7d15h
```